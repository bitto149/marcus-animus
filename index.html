
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Marcus</title>
  <style>
    body { background: #1e1e1e; color: white; font-family: sans-serif; margin: 0; }
    .chat { height: 90vh; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; }
    .msg { margin: 5px 0; padding: 10px; border-radius: 8px; max-width: 70%; }
    .user { align-self: flex-end; background: #075e54; }
    .marcus { align-self: flex-start; background: #262d31; }
    .input-area { display: flex; background: #202c33; padding: 10px; }
    input { flex: 1; padding: 10px; border: none; border-radius: 5px; }
    button { margin-left: 10px; padding: 10px; border: none; border-radius: 5px; background: #25d366; color: white; }
  </style>
</head>
<body>
  <div class="chat" id="chat"></div>
  <div class="input-area">
    <input id="input" placeholder="Scrivi o parla...">
    <button onclick="startListening()">ðŸŽ¤</button>
    <button onclick="send()">Invia</button>
  </div>
  <script src="speech-recognition.js"></script>
  <script src="text-to-speech.js"></script>
  <script>
    const chat = document.getElementById('chat');
    const input = document.getElementById('input');
    function append(text, sender) {
      const div = document.createElement('div');
      div.className = 'msg ' + sender;
      div.textContent = text;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }
    function send() {
      const text = input.value;
      if (!text.trim()) return;
      append(text, 'user');
      input.value = '';
      const reply = "Hai detto: " + text;
      append(reply, 'marcus');
      speak(reply);
    }
    function startListening() {
      listen(text => {
        append(text, 'user');
        const reply = "Hai detto: " + text;
        append(reply, 'marcus');
        speak(reply);
      });
    }
  </script>
</body>
</html>
